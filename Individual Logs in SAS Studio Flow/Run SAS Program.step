{"creationTimeStamp":"2025-04-01T16:03:17.280Z","modifiedTimeStamp":"2025-04-02T16:21:03.980Z","createdBy":"sahaqu","modifiedBy":"sahaqu","name":"Run SAS Program.step","displayName":"Run SAS Program.step","localDisplayName":"Run SAS Program.step","properties":{},"links":[{"method":"GET","rel":"self","href":"/dataFlows/steps/b52e7066-ef21-41f9-b0af-3b0534dfd569","uri":"/dataFlows/steps/b52e7066-ef21-41f9-b0af-3b0534dfd569","type":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"alternate","href":"/dataFlows/steps/b52e7066-ef21-41f9-b0af-3b0534dfd569","uri":"/dataFlows/steps/b52e7066-ef21-41f9-b0af-3b0534dfd569","type":"application/vnd.sas.data.flow.step.summary"},{"method":"GET","rel":"up","href":"/dataFlows/steps","uri":"/dataFlows/steps","type":"application/vnd.sas.collection","itemType":"application/vnd.sas.data.flow.step.summary"},{"method":"PUT","rel":"update","href":"/dataFlows/steps/b52e7066-ef21-41f9-b0af-3b0534dfd569","uri":"/dataFlows/steps/b52e7066-ef21-41f9-b0af-3b0534dfd569","type":"application/vnd.sas.data.flow.step","responseType":"application/vnd.sas.data.flow.step"},{"method":"DELETE","rel":"delete","href":"/dataFlows/steps/b52e7066-ef21-41f9-b0af-3b0534dfd569","uri":"/dataFlows/steps/b52e7066-ef21-41f9-b0af-3b0534dfd569"},{"method":"POST","rel":"copy","href":"/dataFlows/steps/b52e7066-ef21-41f9-b0af-3b0534dfd569/copy","uri":"/dataFlows/steps/b52e7066-ef21-41f9-b0af-3b0534dfd569/copy","responseType":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"transferExport","href":"/dataFlows/steps/b52e7066-ef21-41f9-b0af-3b0534dfd569","uri":"/dataFlows/steps/b52e7066-ef21-41f9-b0af-3b0534dfd569","responseType":"application/vnd.sas.transfer.object"},{"method":"PUT","rel":"transferImportUpdate","href":"/dataFlows/steps/b52e7066-ef21-41f9-b0af-3b0534dfd569","uri":"/dataFlows/steps/b52e7066-ef21-41f9-b0af-3b0534dfd569","type":"application/vnd.sas.transfer.object","responseType":"application/vnd.sas.summary"}],"metadataVersion":0.0,"version":2,"type":"code","flowMetadata":{"inputPorts":[],"outputPorts":[]},"ui":"{\n\t\"showPageContentOnly\": true,\n\t\"pages\": [\n\t\t{\n\t\t\t\"id\": \"page1\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Page 1\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"filepath\",\n\t\t\t\t\t\"type\": \"path\",\n\t\t\t\t\t\"label\": \"Select your SAS Program (file server)\",\n\t\t\t\t\t\"pathtype\": \"file\",\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"datetimestamp_log\",\n\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\"label\": \"Add Date Time Stamps to Log file\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"datetimestamp_lst\",\n\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\"label\": \"Add Date Time Stamps to Result file\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\t\"syntaxversion\": \"1.3.0\",\n\t\"values\": {\n\t\t\"filepath\": \"\",\n\t\t\"datetimestamp_log\": false,\n\t\t\"datetimestamp_lst\": false\n\t}\n}","templates":{"SAS":"/*print log in the same folder where code is */\n\n/* initial release April 1, 2025*/\n/*samiul.haque@sas.com*/\n/* Added OSD html5 output April 2, 2025*/\n%put &=datetimestamp_log;\n%put &=datetimestamp_lst;\n\n%macro checkMacroVar;\n\t%if %length(&filepath) > 0 %then %do;\n\t\t%put &=filepath;\n\t\t%let serverlen=%length(sasserver:);\n\t\t%let sasfilepath=%substr(&filepath, %eval(&serverlen + 1));\n\n\t\t/* Get the current date and time */\n\t\tdata _null_;\n\t\t\tcall symputx('datetime', put(datetime(), \n\t\t\t\tyymmddn8.)||'_'||translate(put(time(), time8.), 'HHMM', ':'));\n\t\trun;\n\n\t\t%let logfilename=%sysfunc(tranwrd(&sasfilepath, .sas, .log));\n\t\t%let lstfilename=%sysfunc(tranwrd(&sasfilepath, .sas, .html));\n\n\t\t%if &datetimestamp_log=1 %then %do;\n\n\t\t\tdata _null_;\n\t\t\t\tcall symputx('datetime', put(date(), yymmddn8.)||'_'||put(hour(time()), \n\t\t\t\t\tz2.)||put(minute(time()), z2.)||put(second(time()), z2.));\n\t\t\trun;\n\n\t\t\t%let finallogfilename=%substr(&logfilename, 1, \n\t\t\t\t%length(&logfilename)-4)_&datetime..log;\n\n\t\t\t/* Example to display the new macro variable */\n\t\t\t%put &finallogfilename;\n\t\t\t%let logfilename=&finallogfilename;\n\t\t%end;\n\n\t\t%if &datetimestamp_lst=1 %then %do;\n\n\t\t\tdata _null_;\n\t\t\t\tcall symputx('datetime', put(date(), yymmddn8.)||'_'||put(hour(time()), \n\t\t\t\t\tz2.)||put(minute(time()), z2.)||put(second(time()), z2.));\n\t\t\trun;\n\n\t\t\t%let finallstfilename=%substr(&lstfilename, 1, \n\t\t\t\t%length(&lstfilename)-5)_&datetime..html;\n\n\t\t\t/* Example to display the new macro variable */\n\t\t\t%put &finallstfilename;\n\t\t\t%let lstfilename=&finallstfilename;\n\t\t%end;\n\t\t%put &=lstfilename;\n\n\t\tproc printto new log=\"&logfilename.\";\n\t\trun;\n\n\t\n\t\tods html5 file=\"&lstfilename.\";\n\t\t%include \"&sasfilepath.\" / source2;\n\t\tods html5 close;\n\n\t\tproc printto;\n\t\trun;\n\n\t%end;\n\t%else %do;\n\t\t%put 'End of flow';\n\t%end;\n%mend checkMacroVar;\n\n%checkMacroVar;"}}
